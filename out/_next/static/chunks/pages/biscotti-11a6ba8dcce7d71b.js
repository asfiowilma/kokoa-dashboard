(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{4977:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/biscotti",function(){return a(2831)}])},366:function(e,s,a){"use strict";a.d(s,{Z:function(){return y}});var t=a(5893),l=a(9008),c=a.n(l),r=a(4529),n=a(4466);let i=(0,r.Ue)()((0,n.tJ)((e,s)=>({isExpanded:!1,setIsExpanded:s=>e({isExpanded:s})}),{name:"sidebar-state"}));var o=a(9121),d=a(8193),m=a(2585),u=a(471),h=a(4955),x=a(1664),p=a.n(x),j=a(1163);function b(e){let{href:s,exact:a,children:l,className:c}=e,{pathname:r}=(0,j.useRouter)(),n=a?r===s:r.startsWith(s);return(0,t.jsx)(p(),{href:s,as:"production"==h.Vi?"/kokoa-dashboard".concat(s):s,className:"".concat(c," ").concat(n?"active":""),children:l})}function f(){let{isExpanded:e,setIsExpanded:s}=i();return e?(0,t.jsx)(g,{setIsExpanded:s}):(0,t.jsx)(v,{setIsExpanded:s})}function g(e){let{setIsExpanded:s}=e,{activities:a}=(0,o.D)();return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-base-100 rounded-box shadow-lg transition transform origin-top-left",children:[(0,t.jsxs)("ul",{className:"flex-1 menu rounded-box p-4 w-42 lg:w-60 overflow-y-auto ",children:[(0,t.jsx)("li",{children:(0,t.jsxs)(b,{href:"/",exact:!0,children:[(0,t.jsx)(d.V9Z,{className:"w-6 h-6 mr-2"})," Dashboard"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)(b,{href:"/settings",exact:!0,children:[(0,t.jsx)(d.xRF,{className:"w-6 h-6 mr-2"})," Settings"]})}),(0,t.jsx)("li",{className:"menu-title mt-4 mb-1",children:(0,t.jsx)("span",{children:"Notifiers"})}),(0,t.jsx)("li",{children:(0,t.jsxs)(b,{href:"/skelefire",exact:!0,children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.qVT,{className:"w-6 h-6 mr-2"})," Skelefire"]}),a.length>0&&(0,t.jsx)("div",{className:"ml-auto badge border-none badge-accent bg-neutral-content",children:a.length})]})}),(0,t.jsx)("li",{children:(0,t.jsxs)(b,{href:"/strawberry",exact:!0,children:[(0,t.jsx)(m.CLk,{className:"w-6 h-6 mr-2"})," Strawberry"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)(b,{href:"/biscotti",exact:!0,children:[(0,t.jsx)(m.e3E,{className:"w-6 h-6 mr-2"})," Biscotti"]})}),(0,t.jsx)("li",{className:"menu-title mt-4 mb-1",children:(0,t.jsx)("span",{children:"Apps"})}),(0,t.jsx)("li",{children:(0,t.jsxs)(b,{href:"/tiramisu",exact:!0,children:[(0,t.jsx)(m.Omh,{className:"w-6 h-6 mr-2"}),"Tiramisu"]})})]}),(0,t.jsxs)("div",{onClick:()=>s(!1),className:"btn btn-ghost flex items-center justify-between m-4",children:[(0,t.jsxs)("div",{children:["collapse ",(0,t.jsx)("span",{className:"hidden md:inline",children:"sidebar"})]}),(0,t.jsx)(u.oMI,{className:"w-6 h-6"})]})]})}function v(e){let{setIsExpanded:s}=e,{activities:a}=(0,o.D)();return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-base-100 rounded-box shadow-lg transform origin-top-left",children:[(0,t.jsxs)("ul",{className:"flex-1 menu rounded-box overflow-y-auto",children:[(0,t.jsx)("li",{children:(0,t.jsx)(b,{href:"/",exact:!0,children:(0,t.jsx)(d.V9Z,{className:"w-5 h-5 mt-2"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(b,{href:"/settings",exact:!0,children:(0,t.jsx)(d.xRF,{className:"w-5 h-5"})})}),(0,t.jsx)("div",{className:"divider my-0"}),(0,t.jsx)("li",{children:(0,t.jsx)(b,{href:"/skelefire",exact:!0,children:(0,t.jsxs)("div",{className:"indicator",children:[(0,t.jsx)(m.qVT,{className:"w-5 h-5"}),a.length>0&&(0,t.jsx)("div",{className:"indicator-item ml-auto badge border-none badge-accent bg-neutral-content",children:a.length})]})})}),(0,t.jsx)("li",{children:(0,t.jsx)(b,{href:"/strawberry",exact:!0,children:(0,t.jsx)(m.CLk,{className:"w-5 h-5"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(b,{href:"/biscotti",exact:!0,children:(0,t.jsx)(m.e3E,{className:"w-5 h-5"})})}),(0,t.jsx)("div",{className:"divider my-0"}),(0,t.jsx)("li",{children:(0,t.jsx)(b,{href:"/tiramisu",exact:!0,children:(0,t.jsx)(m.Omh,{className:"w-5 h-5"})})})]}),(0,t.jsx)("div",{onClick:()=>s(!0),className:"btn btn-ghost rounded-box",children:(0,t.jsx)(u.i9j,{className:"w-5 h-5"})})]})}var N=a(6501),w=a(3454);function y(e){let{children:s}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:"Kokoa"}),(0,t.jsx)("link",{rel:"icon",href:w.env.BACKEND_URL+"/kokoa-favicon.png"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center w-full min-h-screen h-screen bg-neutral",children:[(0,t.jsxs)("div",{className:"w-full flex-1 flex px-4 md:px-8 pt-4 md:pt-8 gap-4 md:gap-6",children:[(0,t.jsx)("aside",{className:"relative",children:(0,t.jsx)(f,{})}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center overflow-auto scrollbar scrollbar-hidden",style:{maxHeight:"calc(100vh - 4rem)"},children:(0,t.jsx)("main",{className:"flex w-full flex-1 items-start",children:s})})]}),(0,t.jsx)(N.x7,{position:"bottom-right",toastOptions:{success:{className:"alert alert-success"},error:{style:{background:"red"}}}}),(0,t.jsx)("footer",{className:"flex items-center justify-center w-full h-8 ",children:"\xa9 Caramel Lyth"})]})]})}},2831:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return K}});var t=a(5893);let l=e=>{var s,a;let{course:l,specialization:c,isActive:r}=e,n=null!=c?c:l,i=null!==(a=null!==(s=null==c?void 0:c.course_count)&&void 0!==s?s:null==l?void 0:l.module_count)&&void 0!==a?a:1,o=()=>{let{task_counts:e}=n,{total:s,completed:a}=e;return console.log("\uD83D\uDE80 ~ file: Indicators.tsx:18 ~ getProgress ~ task_counts:",e),console.log("\uD83D\uDE80 ~ file: Indicators.tsx:23 ~ getProgress ~ Math.floor(((completed / (total || 1)) * 100) / count):",Math.floor(a/(s||1)*i)),Math.floor(a/(s||1)*i)};return(0,t.jsxs)(t.Fragment,{children:[Array.from({length:o()}).map((e,s)=>(0,t.jsx)("div",{className:"badge ".concat(r?"bg-neutral-content border-neutral-content":"badge-primary")},s)),o()!=i?(0,t.jsx)("div",{className:"badge badge-accent"}):null,Array.from({length:i-1-o()}).map((e,s)=>(0,t.jsx)("div",{className:"badge badge-outline"},s))]})};var c=a(3990),r=a(1664),n=a.n(r),i=a(7848),o=a(9669),d=a.n(o),m=a(4955),u=d().create({baseURL:m.T5,headers:{"Content-type":"application/json"}}),h=a(6501);let x=e=>(h.Am.error(e.message),null);async function p(){return await u.get("/biscotti/specializations/").then(e=>e.data).catch(e=>x(e))}async function j(e){return await u.get("/biscotti/courses/?specialization=".concat(e)).then(e=>e.data).catch(e=>x(e))}async function b(e){return u.get("/biscotti/modules/?course=".concat(e)).then(e=>e.data).catch(e=>x(e))}async function f(){return await u.get("/biscotti/tasks/stats").then(e=>e.data).catch(e=>x(e))}async function g(e,s){return await u.patch("/biscotti/tasks/".concat(e,"/"),{is_completed:s}).then(e=>e.data).catch(e=>x(e))}async function v(e){return await u.post("/biscotti/tasks/",e).then(e=>e.data).catch(e=>x(e))}function N(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}var w=a(4529),y=a(4466);let k=(0,w.Ue)()((0,y.tJ)((e,s)=>({specializations:[],courses:[],modules:[],activeSpecialization:null,activeCourse:null,stats:null,setActiveSpecialization:s=>e({activeSpecialization:s}),setActiveCourse:s=>e({activeCourse:s}),setSpecializations:s=>e({specializations:s}),setCourses:s=>e({courses:s}),setModules:s=>e({modules:s}),setStats:s=>e({stats:s}),addTask:(a,t)=>{let l=s().modules.find(e=>e.id==t);l.tasks=[...l.tasks,a],e({stats:{...s().stats,total:s().stats.total+1,incomplete:s().stats.incomplete+1},modules:s().modules.map(e=>e.id==t?l:e)})},toggleCompleteTask:(a,t,l)=>{let c=s().modules.find(e=>e.id==t);c.tasks=c.tasks.map(e=>e.id==a?{...e,is_completed:l}:e),e({stats:{...s().stats,completed:s().stats.completed+(l?1:-1),incomplete:s().stats.incomplete+(l?-1:1)},modules:s().modules.map(e=>e.id==t?c:e)})}}),{name:"biscotti-storage"}));var _=a(1163);let C="specialization",q=()=>{let{pathname:e,query:s}=(0,_.useRouter)(),{specializations:a,setActiveSpecialization:r,setSpecializations:o}=k(),{isLoading:d}=(0,i.a)({queryKey:["specialization"],queryFn:p,onSuccess:e=>{o(e)}}),m=e=>s[C]==N(e);return d?(0,t.jsx)("div",{className:"card shadow-lg bg-base-300 animate-pulse md:card-normal",children:(0,t.jsx)("div",{className:"card-body grid place-items-center",children:(0,t.jsx)(c.crq,{className:"animate-spin w-8 h-8"})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"md:hidden flex w-full gap-3 -order-2 overflow-auto scrollbar scrollbar-hidden sticky top-0",children:a.map(e=>(0,t.jsx)("div",{className:"btn btn-accent btn-sm",children:e.name},e.id))}),(0,t.jsx)("div",{className:"card bg-base-100 shadow-lg",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"card-title",children:"Specializations"}),(0,t.jsx)("div",{className:" flex flex-col gap-3",children:a.map(a=>(0,t.jsxs)(n(),{href:{pathname:e,query:{...s,specialization:N(a.name),course:void 0}},onClick:()=>{r(a)},replace:!0,className:"group alert flex-col md:gap-2 transition cursor-pointer ".concat(m(a.name)?"bg-primary text-primary-content":"hover:bg-neutral-focus"),children:[(0,t.jsxs)("div",{className:"flex justify-between w-full",children:[(0,t.jsx)("div",{className:"uppercase text-sm font-bold",children:a.name}),(0,t.jsx)("div",{className:"flex gap-2 justify-end flex-wrap w-full",children:(0,t.jsx)(l,{isActive:m(a.name),specialization:a})})]}),(0,t.jsx)("progress",{className:" transition progress  ".concat(m(a.name)?"progress-accent":"bg-base-300 progress-primary group-hover:bg-neutral"),value:a.task_counts.completed/(a.task_counts.total||1)})]},a.id))})]})})]})},T="course",z=()=>{let{pathname:e,query:s}=(0,_.useRouter)(),{courses:a,activeSpecialization:r,setActiveCourse:o,setCourses:d}=k(),{isLoading:m}=(0,i.a)({queryKey:[T,null==r?void 0:r.id,"".concat(null==r?void 0:r.id,"-courses")],queryFn:e=>{let{queryKey:s}=e;return j(s[1])},enabled:!!s[C],onSuccess:e=>{d(e)}}),u=e=>s[T]==N(e);return m?(0,t.jsx)("div",{className:"card shadow-lg bg-base-300 animate-pulse md:card-normal",children:(0,t.jsx)("div",{className:"card-body grid place-items-center",children:(0,t.jsx)(c.crq,{className:"animate-spin w-8 h-8"})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"md:hidden sticky top-10 w-full tabs tabs-boxed bg-base-100 -order-1",children:a.map((a,l)=>(0,t.jsxs)(n(),{href:{pathname:e,query:{...s,course:N(a.name)}},onClick:()=>o(a),replace:!0,className:"tab ".concat(u(a.name)?"tab-active":""),children:["Course ",l+1]},a.id))}),(0,t.jsx)("div",{className:"card bg-base-100 shadow-lg overflow-auto scrollbar scrollbar-hidden hover:scrollbar-width-1 hover:scrollbar-track-transparent hover:scrollbar-thumb-stone-500 hover:scrollbar-track-radius-full md:max-h-[calc(100vh_-_11.5rem)]",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"card-title",children:r.name}),(0,t.jsx)("div",{className:"flex flex-col gap-3",children:a.map((a,c)=>(0,t.jsxs)(n(),{href:{pathname:e,query:{...s,course:N(a.name)}},onClick:()=>o(a),replace:!0,className:"group alert flex-col items-start md:gap-2 transition cursor-pointer ".concat(u(a.name)?"bg-primary text-primary-content":"hover:bg-neutral-focus"),children:[(0,t.jsxs)("div",{className:"flex justify-between w-full",children:[(0,t.jsxs)("div",{className:"uppercase text-sm font-bold",children:["Course ",c+1]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(l,{isActive:u(a.name),course:a})})]}),(0,t.jsx)("p",{className:"text-left",children:a.name}),(0,t.jsx)("progress",{className:"transition progress  ".concat(u(a.name)?"progress-accent":"bg-base-300 progress-primary group-hover:bg-neutral"),value:a.task_counts.completed/(a.task_counts.total||1)})]},a.id))})]})})]})},A=()=>{let{stats:e,setStats:s}=k(),{isLoading:a}=(0,i.a)({queryKey:["stats"],queryFn:f,onSuccess:e=>{s(e)}});return a?(0,t.jsx)("div",{className:"col-span-1 md:col-span-3 card shadow-lg bg- bg-base-300 animate-pulse md:card-normal",children:(0,t.jsx)("div",{className:"card-body grid place-items-center",children:(0,t.jsx)(c.crq,{className:"animate-spin w-8 h-8"})})}):(0,t.jsx)("div",{className:"order-first col-span-1 md:col-span-3 card shadow-lg bg-base-100 md:card-normal",children:(0,t.jsxs)("div",{className:"card-body lg:items-center flex flex-col lg:flex-row gap-2 md:gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 md:flex-none card-title flex items-center gap-2",children:[(0,t.jsx)(c.fvE,{})," Overall Progress"]}),(0,t.jsxs)("p",{className:"text-stone-400",children:["BYOC is ",((null==e?void 0:e.completed)/(null==e?void 0:e.total)).toFixed(2),"% complete!"]}),(0,t.jsx)("progress",{className:"flex-none lg:flex-1 w-full progress progress-success bg-base-300 h-6",value:(null==e?void 0:e.completed)/(null==e?void 0:e.total)}),(0,t.jsxs)("p",{className:"text-right -mt-8 mr-4 z-10 md:m-0",children:[null==e?void 0:e.completed,"/",null==e?void 0:e.total," tasks completed"]})]})})};var F=a(8228),S=a(7516),D=a(7536);let E=e=>{let{moduleId:s}=e,{addTask:a}=k(),{register:l,handleSubmit:r,reset:n}=(0,D.cI)(),i=(0,F.D)({mutationFn:e=>v(e),onSuccess:e=>{a(e,s)}}),o=e=>{i.mutate(e),n()};return(0,t.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,t.jsx)("label",{tabIndex:0,className:"btn btn-sm btn-square btn-ghost",children:i.isLoading?(0,t.jsx)(c.crq,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(S.poH,{className:"w-5 h-5"})}),(0,t.jsxs)("form",{onSubmit:r(o),className:"dropdown-content w-64 bg-base-300 rounded-box p-4 form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Add new task"})}),(0,t.jsx)("input",{type:"hidden",...l("module"),value:s}),(0,t.jsx)("input",{type:"text",...l("name"),placeholder:"Type here",className:"input input-bordered w-full"})]})]})};a(7294);let I=()=>{let{query:e}=(0,_.useRouter)(),{activeCourse:s,modules:a,setModules:l}=k(),{isLoading:r}=(0,i.a)({queryKey:["tasks",null==s?void 0:s.id,"".concat(null==s?void 0:s.id,"-modules")],queryFn:e=>{let{queryKey:s}=e;return b(s[1])},enabled:!!e[T],onSuccess:e=>{l(e)}});return e[T]?r?(0,t.jsx)("div",{className:"card shadow-lg bg- bg-base-300 animate-pulse md:card-normal",children:(0,t.jsx)("div",{className:"card-body grid place-items-center",children:(0,t.jsx)(c.crq,{className:"animate-spin w-8 h-8"})})}):(0,t.jsx)("div",{className:"card bg-base-100 shadow-lg md:order-last md:max-h-[calc(100vh_-_11.5rem)] scrollbar scrollbar-hidden hover:scrollbar-width-1 hover:scrollbar-track-transparent hover:scrollbar-thumb-stone-500 hover:scrollbar-track-radius-full overflow-auto",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"card-title sticky top-0",children:[(0,t.jsx)("span",{children:"Tasks"}),(0,t.jsx)("span",{className:"block md:hidden text-base text-stone-300",children:s.name})]}),(0,t.jsx)("div",{className:"form-control p-3 border-2 border-dashed border-base-content rounded-box border-opacity-50 h-full ".concat(0==a.length?"grid place-items-center":""),children:0==a.length?(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)("img",{src:"".concat(m.mY,"/empty-inbox.svg"),alt:"empty",className:"h-36"}),(0,t.jsx)("p",{children:"No Tasks Found"})]}):a.map(e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between bg-stone-900 rounded-btn",children:[(0,t.jsx)("div",{className:"px-2 text-sm uppercase font-bold",children:e.name}),(0,t.jsx)(E,{moduleId:e.id})]}),e.tasks.map(s=>(0,t.jsx)(R,{task:s,moduleId:e.id},s.id))]}))})]})}):(0,t.jsx)("div",{className:"card bg-base-100 shadow-lg md:order-last",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"card-title",children:"Tasks"}),(0,t.jsx)("div",{className:"p-3 border-2 border-dashed border-base-content rounded-box border-opacity-50 grid place-items-center h-full",children:(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)("img",{src:"".concat(m.mY,"/empty-inbox.svg"),alt:"empty",className:"h-36"}),(0,t.jsx)("p",{children:"No Tasks Found"})]})})]})})},R=e=>{let{task:s,moduleId:a}=e,{toggleCompleteTask:l}=k(),c=(0,F.D)({mutationFn:e=>g(s.id,e),onSuccess:(e,t)=>{l(s.id,a,t)}});return(0,t.jsxs)("label",{htmlFor:"task-".concat(s.id),className:"label justify-start gap-4 cursor-pointer",children:[(0,t.jsx)("input",{id:"task-".concat(s.id),type:"checkbox",className:"checkbox",defaultChecked:s.is_completed,onChange:e=>c.mutate(e.target.checked)}),(0,t.jsx)("span",{className:"label-text transition ".concat(s.is_completed?"text-stone-500 line-through":"text-stone-300  hover:text-neutral-content "),children:s.name})]})},L=()=>(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 w-full gap-4",children:[(0,t.jsx)(A,{}),(0,t.jsx)(I,{}),(0,t.jsx)(q,{}),(0,t.jsx)(z,{})]});var O=a(366);function K(){return(0,t.jsx)(O.Z,{children:(0,t.jsx)(L,{})})}},3780:function(e,s,a){"use strict";a.d(s,{Tw:function(){return n},az:function(){return i},fp:function(){return d},ir:function(){return r},zJ:function(){return o}});var t=a(9669),l=a.n(t),c=a(4955);function r(){return l().get("".concat(c.T5,"/skelefire/"))}function n(){return l().get("".concat(c.T5,"/skelefire/courses/"))}function i(){return l().get("".concat(c.T5,"/skelefire/activities/"))}function o(e){return l().patch("".concat(c.T5,"/skelefire/activities/").concat(e,"/mark_as_read/"))}function d(e){return l().patch("".concat(c.T5,"/skelefire/activities/mark_selected_as_read/"),{ids:e})}},9121:function(e,s,a){"use strict";a.d(s,{D:function(){return r}});var t=a(6501),l=a(3780),c=a(4529);let r=(0,c.Ue)()((e,s)=>({courses:[],activities:[],isActive:!1,togglePower:a=>e({isActive:!s().isActive}),setCourses:s=>e({courses:s}),setActivities:s=>e({activities:s}),countUnreadActivities:()=>e({courses:s().courses.map(e=>({...e,unread:s().activities.filter(s=>s.course===e.courseID).length}))}),markAsRead:a=>{1==a.length?(0,l.zJ)(a[0]):(0,l.fp)(a),t.Am.success("".concat(a.length," activity(s) marked as read!")),e({activities:s().activities.filter(e=>!a.includes(e.moduleID))})}}))}},function(e){e.O(0,[980,617,955,874,609,821,536,32,774,888,179],function(){return e(e.s=4977)}),_N_E=e.O()}]);