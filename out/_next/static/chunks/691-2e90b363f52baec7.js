(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{366:function(e,t,i){"use strict";i.d(t,{Z:function(){return j}});var n=i(5893),s=i(9008),r=i.n(s),o=i(8193),c=i(471),a=i(2585),l=i(1664),u=i.n(l),h=i(4955),d=i(1163);function f(e){let{href:t,exact:i,children:s,className:r}=e,{pathname:o}=(0,d.useRouter)(),c=i?o===t:o.startsWith(t);return(0,n.jsx)(u(),{href:h.mY+t,className:"".concat(r," ").concat(c?"active":""),children:s})}var m=i(4529),v=i(4466);let x=(0,m.Ue)()((0,v.tJ)((e,t)=>({isExpanded:!1,setIsExpanded:t=>e({isExpanded:t})}),{name:"sidebar-state"}));var p=i(9121);function w(){let{isExpanded:e,setIsExpanded:t}=x();return e?(0,n.jsx)(b,{setIsExpanded:t}):(0,n.jsx)(g,{setIsExpanded:t})}function b(e){let{setIsExpanded:t}=e,{activities:i}=(0,p.D)();return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-base-100 rounded-box shadow-lg transition transform origin-top-left",children:[(0,n.jsxs)("ul",{className:"flex-1 menu rounded-box p-4 w-42 lg:w-60 overflow-y-auto ",children:[(0,n.jsx)("li",{children:(0,n.jsxs)(f,{href:"/",exact:!0,children:[(0,n.jsx)(o.V9Z,{className:"w-6 h-6 mr-2"})," Dashboard"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f,{href:"/settings",exact:!0,children:[(0,n.jsx)(o.xRF,{className:"w-6 h-6 mr-2"})," Settings"]})}),(0,n.jsx)("li",{className:"menu-title mt-4 mb-1",children:(0,n.jsx)("span",{children:"Notifiers"})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f,{href:"/skelefire",exact:!0,children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(a.qVT,{className:"w-6 h-6 mr-2"})," Skelefire"]}),i.length>0&&(0,n.jsx)("div",{className:"ml-auto badge border-none badge-accent bg-neutral-content",children:i.length})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f,{href:"/strawberry",exact:!0,children:[(0,n.jsx)(a.CLk,{className:"w-6 h-6 mr-2"})," Strawberry"]})}),(0,n.jsx)("li",{className:"menu-title mt-4 mb-1",children:(0,n.jsx)("span",{children:"Apps"})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f,{href:"/biscotti",exact:!0,children:[(0,n.jsx)(a.e3E,{className:"w-6 h-6 mr-2"})," Biscotti"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(f,{href:"/tiramisu",exact:!0,children:[(0,n.jsx)(a.Omh,{className:"w-6 h-6 mr-2"}),"Tiramisu"]})})]}),(0,n.jsxs)("div",{onClick:()=>t(!1),className:"btn btn-ghost flex items-center justify-between m-4",children:[(0,n.jsxs)("div",{children:["collapse ",(0,n.jsx)("span",{className:"hidden md:inline",children:"sidebar"})]}),(0,n.jsx)(c.oMI,{className:"w-6 h-6"})]})]})}function g(e){let{setIsExpanded:t}=e,{activities:i}=(0,p.D)();return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-base-100 rounded-box shadow-lg transform origin-top-left",children:[(0,n.jsxs)("ul",{className:"flex-1 menu rounded-box overflow-y-auto",children:[(0,n.jsx)("li",{children:(0,n.jsx)(f,{href:"/",exact:!0,children:(0,n.jsx)(o.V9Z,{className:"w-5 h-5 mt-2"})})}),(0,n.jsx)("li",{children:(0,n.jsx)(f,{href:"/settings",exact:!0,children:(0,n.jsx)(o.xRF,{className:"w-5 h-5"})})}),(0,n.jsx)("div",{className:"divider my-0"}),(0,n.jsx)("li",{children:(0,n.jsx)(f,{href:"/skelefire",exact:!0,children:(0,n.jsxs)("div",{className:"indicator",children:[(0,n.jsx)(a.qVT,{className:"w-5 h-5"}),i.length>0&&(0,n.jsx)("div",{className:"indicator-item ml-auto badge border-none badge-accent bg-neutral-content",children:i.length})]})})}),(0,n.jsx)("li",{children:(0,n.jsx)(f,{href:"/strawberry",exact:!0,children:(0,n.jsx)(a.CLk,{className:"w-5 h-5"})})}),(0,n.jsx)("div",{className:"divider my-0"}),(0,n.jsx)("li",{children:(0,n.jsx)(f,{href:"/biscotti",exact:!0,children:(0,n.jsx)(a.e3E,{className:"w-5 h-5"})})}),(0,n.jsx)("li",{children:(0,n.jsx)(f,{href:"/tiramisu",exact:!0,children:(0,n.jsx)(a.Omh,{className:"w-5 h-5"})})})]}),(0,n.jsx)("div",{onClick:()=>t(!0),className:"btn btn-ghost rounded-box",children:(0,n.jsx)(c.i9j,{className:"w-5 h-5"})})]})}var k=i(6501),_=i(3454);function j(e){let{children:t}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Kokoa"}),(0,n.jsx)("link",{rel:"icon",href:_.env.BACKEND_URL+"/kokoa-favicon.png"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center w-full min-h-screen h-screen bg-neutral",children:[(0,n.jsxs)("div",{className:"w-full flex-1 flex px-4 md:px-8 pt-4 md:pt-8 gap-4 md:gap-6",children:[(0,n.jsx)("aside",{className:"relative",children:(0,n.jsx)(w,{})}),(0,n.jsx)("div",{className:"flex-1 flex flex-col items-center overflow-auto scrollbar scrollbar-hidden",style:{maxHeight:"calc(100vh - 4rem)"},children:(0,n.jsx)("main",{className:"flex w-full flex-1 items-start",children:t})})]}),(0,n.jsx)(k.x7,{position:"bottom-right",toastOptions:{success:{className:"alert alert-success"},error:{style:{background:"red"}}}}),(0,n.jsx)("footer",{className:"flex items-center justify-center w-full h-8 ",children:"\xa9 Caramel Lyth"})]})]})}},3014:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n=i(5893),s=i(7294),r=i(3780),o=i(2585),c=i(8874),a=i.n(c),l=i(9121),u=i(3454);function h(){let[e,t]=(0,s.useState)(!1),{activities:i,setActivities:c,countUnreadActivities:h,markAsRead:d}=(0,l.D)();async function f(){t(!0),await (0,r.ir)();var e=await (0,r.az)();c(e.data),h(),t(!1),e.data.length>0&&a().create("Skelefire",{body:"New updates found!",icon:u.env.BACKEND_URL+"/kokoa-png",onClick:function(){window.focus(),this.close()}})}return(0,n.jsxs)("div",{className:"card-title flex justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(o.qVT,{className:"w-6 h-6 mr-2"})," Skelefire"]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"dropdown dropdown-end dropdown-hover",children:[(0,n.jsx)("div",{tabIndex:0,className:"m-1 btn btn-sm btn-ghost",children:"Actions"}),(0,n.jsxs)("ul",{className:"shadow menu dropdown-content bg-primary text-primary-content rounded-box w-52 text-base",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{onClick:function(){let e=i.filter(e=>e.selected).map(e=>e.moduleID);d(e)},children:"Mark selected as read"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{onClick:function(){let e=i.map(e=>e.moduleID);d(e)},children:"Mark all as read"})})]})]}),(0,n.jsx)("button",{onClick:f,className:"btn btn-sm btn-ghost ".concat(e&&"loading"),children:e?"loading":"refresh"})]})]})}},5191:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n=i(5893),s=i(7294),r=i(4578),o=i(381),c=i.n(o),a=i(9121);function l(e){let{activity:t,isOverview:i}=e,{courses:s,activities:o,markAsRead:l,setActivities:u}=(0,a.D)(),h=()=>{u(o.map(e=>e.moduleID==t.moduleID?{...e,selected:!e.selected}:e))},d=e=>l([e]);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"checkbox",checked:t.selected,onClick:h,readOnly:!0,className:"checkbox checkbox-sm"})}),(0,n.jsx)("td",{children:(0,n.jsx)("a",{href:"https://scele.cs.ui.ac.id/course/view.php?id=".concat(t.course),target:"_blank",className:"badge badge-accent",children:(e=>{let t=s.find(t=>t.courseID===e);return null==t?void 0:t.shortname})(t.course)})}),(0,n.jsx)("td",{className:"".concat(i?"max-w-snippet":"max-w-prose"," truncate text-left"),children:t.content}),(0,n.jsx)("td",{children:c()(t.lastUpdated).fromNow()}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{onClick:()=>d(t.moduleID),className:"btn btn-sm btn-ghost",children:(0,n.jsx)(r.J$L,{})})})]})}var u=i(4955);function h(e){let{filteredActivities:t,isOverview:i}=e,{activities:r,setActivities:o}=(0,a.D)(),[c,h]=(0,s.useState)(t.every(e=>e.selected)),d=()=>{h(!c),o(r.map(e=>({...e,selected:c})))};return(0,n.jsxs)("div",{className:"".concat(i?"max-h-64":"max-h-80"," overflow-auto scrollbar scrollbar-hidden hover:scrollbar-width-1 hover:scrollbar-track-transparent hover:scrollbar-thumb-yellow-600 hover:scrollbar-track-radius-full pr-1.5"),children:[(0,n.jsxs)("table",{className:"table table-compact w-full text-center relative",children:[(0,n.jsx)("thead",{className:"sticky top-0 z-20",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)("input",{type:"checkbox",checked:t.every(e=>e.selected),onClick:d,readOnly:!0,className:"checkbox checkbox-sm"})}),(0,n.jsx)("th",{children:"Course"}),(0,n.jsx)("th",{className:"text-left",children:"Activity Name"}),(0,n.jsx)("th",{children:"Last Update"}),(0,n.jsx)("th",{})]})}),0!=t.length&&(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsx)(l,{activity:e,isOverview:i},e.moduleID))})]}),0==t.length&&(0,n.jsx)("div",{className:"w-full pt-6 flex justify-center",children:(0,n.jsx)("img",{src:"".concat(u.mY,"/empty-inbox.svg"),alt:"empty",className:i?"h-48":"h-60"})})]})}},9869:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(5893);i(7294);var s=i(9121);function r(){let{courses:e}=(0,s.D)();return(0,n.jsx)("div",{className:"grid grid-cols-3 grid-rows-2 md:grid-cols-5 md:grid-rows-none gap-3",children:e.map(e=>(0,n.jsx)("a",{href:"https://scele.cs.ui.ac.id/course/view.php?id=".concat(e.courseID),target:"_blank",className:"btn bg-accent text-accent-content rounded-box",children:e.shortname},e.courseID))})}},4291:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var n=i(5893);function s(e){let{coursesTabs:t,activeTab:i,onTabChange:s}=e;return(0,n.jsxs)("div",{className:"tabs",children:[t.map(e=>(0,n.jsxs)("div",{onClick:()=>s(e.shortname),className:"indicator tab tab-lifted ".concat(e.shortname===i&&"tab-active"),children:[e.shortname,e.unread>0&&(0,n.jsx)("div",{className:"badge ml-2 ".concat(e.shortname===i&&"badge-outline"),children:e.unread})]},e.shortname)),(0,n.jsx)("div",{className:"flex-1 tab tab-lifted cursor-default"})]})}i(7294)},3780:function(e,t,i){"use strict";i.d(t,{Tw:function(){return c},az:function(){return a},fp:function(){return u},ir:function(){return o},zJ:function(){return l}});var n=i(9669),s=i.n(n),r=i(4955);function o(){return s().get("".concat(r.T5,"/skelefire/"))}function c(){return s().get("".concat(r.T5,"/skelefire/courses/"))}function a(){return s().get("".concat(r.T5,"/skelefire/activities/"))}function l(e){return s().patch("".concat(r.T5,"/skelefire/activities/").concat(e,"/mark_as_read/"))}function u(e){return s().patch("".concat(r.T5,"/skelefire/activities/mark_selected_as_read/"),{ids:e})}},9121:function(e,t,i){"use strict";i.d(t,{D:function(){return o}});var n=i(6501),s=i(3780),r=i(4529);let o=(0,r.Ue)()((e,t)=>({courses:[],activities:[],isActive:!1,togglePower:i=>e({isActive:!t().isActive}),setCourses:t=>e({courses:t}),setActivities:t=>e({activities:t}),countUnreadActivities:()=>e({courses:t().courses.map(e=>({...e,unread:t().activities.filter(t=>t.course===e.courseID).length}))}),markAsRead:i=>{1==i.length?(0,s.zJ)(i[0]):(0,s.fp)(i),n.Am.success("".concat(i.length," activity(s) marked as read!")),e({activities:t().activities.filter(e=>!i.includes(e.moduleID))})}}))},8874:function(e,t,i){e.exports=function(){"use strict";var e={errors:{incompatible:"".concat("PushError:"," Push.js is incompatible with browser."),invalid_plugin:"".concat("PushError:"," plugin class missing from plugin manifest (invalid plugin). Please check the documentation."),invalid_title:"".concat("PushError:"," title of notification must be a string"),permission_denied:"".concat("PushError:"," permission request declined"),sw_notification_error:"".concat("PushError:"," could not show a ServiceWorker notification due to the following reason: "),sw_registration_error:"".concat("PushError:"," could not register the ServiceWorker due to the following reason: "),unknown_interface:"".concat("PushError:"," unable to create notification: unknown interface")}};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function o(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return t&&("object"==typeof t||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}var u=function(){function e(t){n(this,e),this._win=t,this.GRANTED="granted",this.DEFAULT="default",this.DENIED="denied",this._permissions=[this.GRANTED,this.DEFAULT,this.DENIED]}return r(e,[{key:"request",value:function(e,t){return arguments.length>0?this._requestWithCallback.apply(this,arguments):this._requestAsPromise()}},{key:"_requestWithCallback",value:function(e,t){var i,n=this,s=this.get(),r=!1,o=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n._win.Notification.permission;r||(r=!0,void 0===i&&n._win.webkitNotifications&&(i=n._win.webkitNotifications.checkPermission()),i===n.GRANTED||0===i?e&&e():t&&t())};s!==this.DEFAULT?o(s):this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission?this._win.webkitNotifications.requestPermission(o):this._win.Notification&&this._win.Notification.requestPermission?(i=this._win.Notification.requestPermission(o))&&i.then&&i.then(o).catch(function(){t&&t()}):e&&e()}},{key:"_requestAsPromise",value:function(){var e=this,t=this.get(),i=t!==this.DEFAULT,n=this._win.Notification&&this._win.Notification.requestPermission,s=this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission;return new Promise(function(r,o){var c,a=!1,l=function(t){a||(a=!0,t===e.GRANTED||0===t?r():o())};i?l(t):s?e._win.webkitNotifications.requestPermission(function(e){l(e)}):n?(c=e._win.Notification.requestPermission(l))&&c.then&&c.then(l).catch(o):r()})}},{key:"has",value:function(){return this.get()===this.GRANTED}},{key:"get",value:function(){return this._win.Notification&&this._win.Notification.permission?this._win.Notification.permission:this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission?this._permissions[this._win.webkitNotifications.checkPermission()]:navigator.mozNotification?this.GRANTED:this._win.external&&this._win.external.msIsSiteMode?this._win.external.msIsSiteMode()?this.GRANTED:this.DEFAULT:this.GRANTED}}]),e}(),h=function(){function e(){n(this,e)}return r(e,null,[{key:"isUndefined",value:function(e){return void 0===e}},{key:"isNull",value:function(e){return null===obj}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isFunction",value:function(e){return e&&"[object Function]"===({}).toString.call(e)}},{key:"isObject",value:function(e){return"object"===t(e)}},{key:"objectMerge",value:function(e,t){for(var i in t)e.hasOwnProperty(i)&&this.isObject(e[i])&&this.isObject(t[i])?this.objectMerge(e[i],t[i]):e[i]=t[i]}}]),e}(),d=function e(t){n(this,e),this._win=t},f=function(e){function t(){return n(this,t),l(this,c(t).apply(this,arguments))}return o(t,d),r(t,[{key:"isSupported",value:function(){return void 0!==this._win.Notification}},{key:"create",value:function(e,t){return new this._win.Notification(e,{icon:h.isString(t.icon)||h.isUndefined(t.icon)||h.isNull(t.icon)?t.icon:t.icon.x32,body:t.body,tag:t.tag,requireInteraction:t.requireInteraction})}},{key:"close",value:function(e){e.close()}}]),t}(),m=function(t){function i(){return n(this,i),l(this,c(i).apply(this,arguments))}return o(i,d),r(i,[{key:"isSupported",value:function(){return void 0!==this._win.navigator&&void 0!==this._win.navigator.serviceWorker}},{key:"getFunctionBody",value:function(e){var t=e.toString().match(/function[^{]+{([\s\S]*)}$/);return null!=t&&t.length>1?t[1]:null}},{key:"create",value:function(t,i,n,s,r){var o=this;this._win.navigator.serviceWorker.register(s),this._win.navigator.serviceWorker.ready.then(function(s){var c={id:t,link:n.link,origin:document.location.href,onClick:h.isFunction(n.onClick)?o.getFunctionBody(n.onClick):"",onClose:h.isFunction(n.onClose)?o.getFunctionBody(n.onClose):""};void 0!==n.data&&null!==n.data&&(c=Object.assign(c,n.data)),s.showNotification(i,{icon:n.icon,body:n.body,vibrate:n.vibrate,tag:n.tag,data:c,requireInteraction:n.requireInteraction,silent:n.silent}).then(function(){s.getNotifications().then(function(e){s.active.postMessage(""),r(e)})}).catch(function(t){throw Error(e.errors.sw_notification_error+t.message)})}).catch(function(t){throw Error(e.errors.sw_registration_error+t.message)})}},{key:"close",value:function(){}}]),i}(),v=function(e){function t(){return n(this,t),l(this,c(t).apply(this,arguments))}return o(t,d),r(t,[{key:"isSupported",value:function(){return void 0!==this._win.navigator.mozNotification}},{key:"create",value:function(e,t){var i=this._win.navigator.mozNotification.createNotification(e,t.body,t.icon);return i.show(),i}}]),t}(),x=function(e){function t(){return n(this,t),l(this,c(t).apply(this,arguments))}return o(t,d),r(t,[{key:"isSupported",value:function(){return void 0!==this._win.external&&void 0!==this._win.external.msIsSiteMode}},{key:"create",value:function(e,t){return this._win.external.msSiteModeClearIconOverlay(),this._win.external.msSiteModeSetIconOverlay(h.isString(t.icon)||h.isUndefined(t.icon)?t.icon:t.icon.x16,e),this._win.external.msSiteModeActivate(),null}},{key:"close",value:function(){this._win.external.msSiteModeClearIconOverlay()}}]),t}(),p=function(e){function t(){return n(this,t),l(this,c(t).apply(this,arguments))}return o(t,d),r(t,[{key:"isSupported",value:function(){return void 0!==this._win.webkitNotifications}},{key:"create",value:function(e,t){var i=this._win.webkitNotifications.createNotification(t.icon,e,t.body);return i.show(),i}},{key:"close",value:function(e){e.cancel()}}]),t}();return new(function(){function t(e){n(this,t),this._currentId=0,this._notifications={},this._win=e,this.Permission=new u(e),this._agents={desktop:new f(e),chrome:new m(e),firefox:new v(e),ms:new x(e),webkit:new p(e)},this._configuration={serviceWorker:"/serviceWorker.min.js",fallback:function(e){}}}return r(t,[{key:"_closeNotification",value:function(t){var i=!0,n=this._notifications[t];if(void 0!==n){if(i=this._removeNotification(t),this._agents.desktop.isSupported())this._agents.desktop.close(n);else if(this._agents.webkit.isSupported())this._agents.webkit.close(n);else{if(!this._agents.ms.isSupported())throw i=!1,Error(e.errors.unknown_interface);this._agents.ms.close()}return i}return!1}},{key:"_addNotification",value:function(e){var t=this._currentId;return this._notifications[t]=e,this._currentId++,t}},{key:"_removeNotification",value:function(e){var t=!1;return this._notifications.hasOwnProperty(e)&&(delete this._notifications[e],t=!0),t}},{key:"_prepareNotification",value:function(e,t){var i,n=this;return i={get:function(){return n._notifications[e]},close:function(){n._closeNotification(e)}},t.timeout&&setTimeout(function(){i.close()},t.timeout),i}},{key:"_serviceWorkerCallback",value:function(e,t,i){var n=this,s=this._addNotification(e[e.length-1]);navigator&&navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("message",function(e){var t=JSON.parse(e.data);"close"===t.action&&Number.isInteger(t.id)&&n._removeNotification(t.id)}),i(this._prepareNotification(s,t))),i(null)}},{key:"_createCallback",value:function(e,t,i){var n,s=this,r=null;if(t=t||{},n=function(e){s._removeNotification(e),h.isFunction(t.onClose)&&t.onClose.call(s,r)},this._agents.desktop.isSupported())try{r=this._agents.desktop.create(e,t)}catch(n){var o=this._currentId,c=this.config().serviceWorker;this._agents.chrome.isSupported()&&this._agents.chrome.create(o,e,t,c,function(e){return s._serviceWorkerCallback(e,t,i)})}else this._agents.webkit.isSupported()?r=this._agents.webkit.create(e,t):this._agents.firefox.isSupported()?this._agents.firefox.create(e,t):this._agents.ms.isSupported()?r=this._agents.ms.create(e,t):(t.title=e,this.config().fallback(t));if(null!==r){var a=this._addNotification(r),l=this._prepareNotification(a,t);h.isFunction(t.onShow)&&r.addEventListener("show",t.onShow),h.isFunction(t.onError)&&r.addEventListener("error",t.onError),h.isFunction(t.onClick)&&r.addEventListener("click",t.onClick),r.addEventListener("close",function(){n(a)}),r.addEventListener("cancel",function(){n(a)}),i(l)}i(null)}},{key:"create",value:function(t,i){var n,s=this;if(!h.isString(t))throw Error(e.errors.invalid_title);return n=this.Permission.has()?function(e,n){try{s._createCallback(t,i,e)}catch(e){n(e)}}:function(n,r){s.Permission.request().then(function(){s._createCallback(t,i,n)}).catch(function(){r(e.errors.permission_denied)})},new Promise(n)}},{key:"count",value:function(){var e,t=0;for(e in this._notifications)this._notifications.hasOwnProperty(e)&&t++;return t}},{key:"close",value:function(e){var t;for(t in this._notifications)if(this._notifications.hasOwnProperty(t)&&this._notifications[t].tag===e)return this._closeNotification(t)}},{key:"clear",value:function(){var e,t=!0;for(e in this._notifications)this._notifications.hasOwnProperty(e)&&(t=t&&this._closeNotification(e));return t}},{key:"supported",value:function(){var e=!1;for(var t in this._agents)this._agents.hasOwnProperty(t)&&(e=e||this._agents[t].isSupported());return e}},{key:"config",value:function(e){return(void 0!==e||null!==e&&h.isObject(e))&&h.objectMerge(this._configuration,e),this._configuration}},{key:"extend",value:function(t){var i,n={}.hasOwnProperty;if(!n.call(t,"plugin"))throw Error(e.errors.invalid_plugin);for(var s in n.call(t,"config")&&h.isObject(t.config)&&null!==t.config&&this.config(t.config),i=new t.plugin(this.config()))n.call(i,s)&&h.isFunction(i[s])&&(this[s]=i[s])}}]),t}())("undefined"!=typeof window?window:i.g)}()}}]);